{% extends 'main/base.html' %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'main/css/user_details.css' %}" media="screen">
{% endblock %}
{% block content %}
<div class="container">
    <!-- Row 1: User details -->
    <div class="row">
        <div class="column">
            <h1>Details for {{ user.email }}</h1>
            <h1>Period from {{ date_from|date:"d M Y H:i" }} to {{ date_to|date:"d M Y H:i" }}</h1>
        </div>
    </div>

    <!-- Row 2: Map and Chart side by side -->
    <div class="row">
        <div class="column map-container">
            <div id="map">{{ map_html|safe }}</div>
        </div>
        <div class="column chart-container">
            <canvas id="temperatureChart"></canvas>
        </div>
    </div>

    <!-- Row 3: Average temperatures -->
    <div class="row">
        <div class="column">
            <p><strong>Average Ambient Temperature:</strong> {{ average_ambient_temperature }}°C</p>
        </div>
        <div class="column">
            <p><strong>Average Target Temperature:</strong> {{ average_target_temperature }}°C</p>
        </div>
        <div class="column">
            <p><strong>Average Current Temperature:</strong> {{ average_current_temperature }}°C</p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
<script>
    var telemetry = JSON.parse('{{ markers|escapejs }}');
</script>
<script src="{% static 'main/js/map-and-graph.js' %}"></script>
{% endblock %}